<!doctype html>
<html lang="en">

<head>
    <!-- Meta Properties -->
    <meta charset="UTF-8">
    <title>El Koura 3andek</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <link rel="icon" href="img/ico.png" type="image/x-icon" />
    <!-- CSS -->
    <link rel="stylesheet" href="./lib/sidr/dist/stylesheets/jquery.sidr.light.min.css">
    <link rel="stylesheet" href="./lib/jquery-modal/jquery.modal.min.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="./css/main.css" />
    <style>
        div#load_screen {
            background: -webkit-linear-gradient(#00d9ff 0%, #527dff 100%);
            background: -moz-linear-gradient(#00d9ff 0%, #527dff 100%);
            background: -ms-linear-gradient(#00d9ff 0%, #527dff 100%);
            opacity: 1;
            position: fixed;
            z-index: 9999999;
            top: 0px;
            width: 100%;
            height: 1600px;
        }

        div#load_screen>div#loading {
            color: #FFF;
            width: 120px;
            height: 24px;
            margin: 300px auto;
        }
    </style>
    <script>
        window.addEventListener("load", function() {
            var load_screen = document.getElementById("load_screen");
            document.body.removeChild(load_screen);
        });
    </script>
</head>
<!-- Audio -->
<audio id="split_cell" src="audio/split.mp3"></audio>
<audio id="spawn_cell" src="audio/spawn.mp3"></audio>
</head>
<div class="loader"></div>

<body>
    <div id="load_screen">
        <div id="loading">loading</div>
    </div>
    <div id="gameAreaWrapper">
        <div id="status"><span class="title">Dans l’arène</span></div>
        <div class="agarscore" id="agarscore">
            <div id="agarnumber">Score:0</div>
        </div>
        <div id="mobile">
            <input type="image" id="split" class="split" src="./img/split.png" alt="splitBtn">
            <input type="image" id="feed" class="feed" src="./img/feed.png" alt="feedBtn">
        </div>
        <canvas tabindex="1" id="cvs"></canvas>
    </div>
    <div id="logo_delice" style="position:fixed;left:40vw;display:none;"><img src="./img/logo_delice.png" /></div>
    <div id="startMenuWrapper">
        <div id="startMenu">
            <!-- <p>Open Agar
            </p>
            <p id="username"></p> -->
            <a onclick="document.getElementById('spawn_cell').play();"><button id="startButton" class="playButton"></button></a>
            <!-- <button id="spectateButton">Spectate</button> -->
            <!-- <button id="settingsButton">Settings</button> -->
            <!-- <button id="logoutButton">Logout</button> -->
            <!-- <br />
            <div id="settings">
                <h3>Settings</h3>
                <ul>
                    <label><input id="visBord" type="checkbox">Show border</label>
                    <label><input id="showMass" type="checkbox">Show mass</label>
                    <br />
                    <label><input id="continuity" type="checkbox">Continue moving when mouse is off-screen</label>
                    <br />
                    <label><input id="roundFood" type="checkbox" checked>Rounded food</label>
                </ul>
            </div> -->
        </div>
    </div>
    <center>
        <button id="facebook" onclick="shareFB()" style="display:none;">Partager pour Rejouer</button>
    </center>
    <form hidden id="howto" class="modal:open" style="max-width: 800px;">
        <img src="./img/Instruction.png">
    </form>
    <form hidden id="classement" class="modal:open" style="max-width: 800px;">
        <img src="./img/general.png">
        <div style="position:absolute;top:180px;left:170px;">
            <div id="g1"></div>
            <div id="g2"></div>
            <div id="g3"></div>
            <div id="g4"></div>
            <div id="g5"></div>
        </div>
        <div style="position:absolute;top:180px;left:400px;">
            <div id="g6"></div>
            <div id="g7"></div>
            <div id="g8"></div>
            <div id="g9"></div>
            <div id="g10"></div>
        </div>
    </form>
    <form hidden id="semaine" class="modal:open" style="max-width: 800px;">
        <img src="./img/semaine.png">
        <div style="position:absolute;top:180px;left:170px;">
            <div id="s1"></div>
            <div id="s2"></div>
            <div id="s3"></div>
            <div id="s4"></div>
            <div id="s5"></div>
        </div>
        <div style="position:absolute;top:180px;left:380px;">
            <div id="s6"></div>
            <div id="s7"></div>
            <div id="s8"></div>
            <div id="s9"></div>
            <div id="s10"></div>
        </div>
    </form>
    <form hidden id="cadeaux" class="modal:open" style="max-width: 1000px;">
        <img src="./img/Cadeau.png">
    </form>
    <!-- JS -->
    <!-- SIDR Menu -->
    <a id="simple-menu" href="#sidr" style="position:fixed;z-index:9999;top:24px;left:24px;"><img src="./img/menu.png" /></a>

    <div id="sidr">
        <div class="menuTitle"><img src="./img/menu/closeMenu.png">Menu</div>
        <ul class="sidrMenu">
            <li><a href="#howto" rel="modal:open" class="menuButton redButton"><span class="textAdjust">Comment jouer ?</span></a></li>
            <li><a href="#classement"class="menuButton yellowButton" onclick="getScore()"><span class="textAdjust">Classement</span></a>
                <img class="trans" src="./img/Transparent.png" />
                <a href="#classement" class="transtext" rel="modal:open" onclick="getScore()">Général</a>
                <a href="#semaine" class="transtext" rel="modal:open" style="top:203px;" onclick="getSemaine()">Semaine</a></li>
            <li><a href="#cadeaux" rel="modal:open" class="menuButton greenButton" style="margin-top:40px;"><span class="textAdjust">Cadeaux</span></a></li>
            <li><a href="./reglement" class="menuButton roseButton"><span class="textAdjust">Règlement</span></a></li>
        </ul>
    </div>
    <script src="./lib/jquery/dist/jquery.min.js"></script>
    <script src="./lib/sidr/dist/jquery.sidr.min.js"></script>
    <script src="./lib/jquery-modal/jquery.modal.min.js" type="text/javascript" charset="utf-8"></script>
    <script>
        $(document).ready(function() {
            $('#simple-menu').sidr();
        });
        $(document).on("click", function() {
            $.sidr('close', 'sidr');
        });


        function getScore() {
            $.ajax({
                type: "GET",
                url: "/getScore",
                success: function(response) {
                    var users = response;
                    for (var i = 0; i < 9; i++) {
                        document.getElementById("g" + (i + 1)).innerHTML = "<div class='scorediv'><img src=\"" + users[i].picture + "\" width=\"23\" height=\"23\"/> " +
                            users[i].firstName + " " + users[i].lastName + " : " + users[i].score + " </div>";
                    }
                }
            });
        }

        function getSemaine() {
            $.ajax({
                type: "GET",
                url: "/getSemaine",
                success: function(response) {
                    var users = response;
                    for (var i = 0; i < 9; i++) {
                        document.getElementById("s" + (i + 1)).innerHTML = "<div class='scorediv'><img src=\"" + users[i].picture + "\" width=\"23\" height=\"23\"/> " +
                            users[i].firstName + " " + users[i].lastName + " : " + users[i].score + " </div>";
                    }
                }
            });
        }

        $(document).ready(function() {
            $.ajaxSetup({
                cache: true
            });
            $.getScript('//connect.facebook.net/en_US/sdk.js', function() {
                FB.init({
                    appId: '1849476105327877',
                    version: 'v2.8'
                });
            });


        });

        function shareFB() {
            var msg = "";
            if (window.score == undefined) {
                msg = "Toi aussi tu peut nous rejoindre sur El Koura 3andek!";
            } else {
                msg = 'Mon Score est: ' + window.score + ', Peux-tu faire mieux?'
            }
            FB.ui({
                method: 'feed',
                link: 'http://197.12.9.102',
                description: msg,
                caption: 'El Koura 3andek',
            }, function(response) {
                window.location.href = "/";
                //     global.kicked = false;
                //     document.getElementById('startButton').style.display = 'block';
                //
                //     document.getElementById('facebook').style.display = 'none';
                //     document.getElementById('logo_delice').style.display = 'none';
                //     document.getElementById('gameAreaWrapper').style.opacity = 0;
                //     document.getElementById('startMenuWrapper').style.maxHeight = '1000px';
                //     global.died = false;
                //     if (global.animLoopHandle) {
                //         window.cancelAnimationFrame(global.animLoopHandle);
                //         global.animLoopHandle = undefined;
                //     }

            });
        }
    </script>
    <!-- MODAL-->


    <script src="./js/bundle-min.js"></script>
</body>

</html>
